[{"/Users/ngw/Documents/Sites/Pianopet/client/src/index.js":"1","/Users/ngw/Documents/Sites/Pianopet/client/src/App.js":"2","/Users/ngw/Documents/Sites/Pianopet/client/src/reportWebVitals.js":"3","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Dashboard.js":"4","/Users/ngw/Documents/Sites/Pianopet/client/src/AppContext.js":"5","/Users/ngw/Documents/Sites/Pianopet/client/src/utils/index.js":"6","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Guest.js":"7","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Loading.js":"8","/Users/ngw/Documents/Sites/Pianopet/client/src/components/MiniMenu.js":"9","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Modal.js":"10","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Student.js":"11","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Teacher.js":"12","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Marketplace.js":"13","/Users/ngw/Documents/Sites/Pianopet/client/src/components/ViewStudent.js":"14","/Users/ngw/Documents/Sites/Pianopet/client/src/components/ContextMenu.js":"15","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Dropdown.js":"16"},{"size":500,"mtime":1607403407622,"results":"17","hashOfConfig":"18"},{"size":1621,"mtime":1613084051279,"results":"19","hashOfConfig":"18"},{"size":362,"mtime":1607403407623,"results":"20","hashOfConfig":"18"},{"size":917,"mtime":1613115514815,"results":"21","hashOfConfig":"18"},{"size":97,"mtime":1607733049448,"results":"22","hashOfConfig":"18"},{"size":617,"mtime":1613104797140,"results":"23","hashOfConfig":"18"},{"size":9062,"mtime":1613201973790,"results":"24","hashOfConfig":"18"},{"size":234,"mtime":1612233939058,"results":"25","hashOfConfig":"18"},{"size":684,"mtime":1612233978520,"results":"26","hashOfConfig":"18"},{"size":965,"mtime":1612233987275,"results":"27","hashOfConfig":"18"},{"size":7204,"mtime":1612236691840,"results":"28","hashOfConfig":"18"},{"size":25887,"mtime":1613204357194,"results":"29","hashOfConfig":"18"},{"size":2453,"mtime":1612679889327,"results":"30","hashOfConfig":"18"},{"size":16744,"mtime":1612850070861,"results":"31","hashOfConfig":"18"},{"size":714,"mtime":1613117759718,"results":"32","hashOfConfig":"18"},{"size":4496,"mtime":1613203556114,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"sahw5t",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"45"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"36"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"66"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"36"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"36"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"36"},"/Users/ngw/Documents/Sites/Pianopet/client/src/index.js",[],["76","77"],"/Users/ngw/Documents/Sites/Pianopet/client/src/App.js",[],"/Users/ngw/Documents/Sites/Pianopet/client/src/reportWebVitals.js",[],"/Users/ngw/Documents/Sites/Pianopet/client/src/components/Dashboard.js",[],"/Users/ngw/Documents/Sites/Pianopet/client/src/AppContext.js",[],["78","79"],"/Users/ngw/Documents/Sites/Pianopet/client/src/utils/index.js",[],"/Users/ngw/Documents/Sites/Pianopet/client/src/components/Guest.js",[],"/Users/ngw/Documents/Sites/Pianopet/client/src/components/Loading.js",[],"/Users/ngw/Documents/Sites/Pianopet/client/src/components/MiniMenu.js",[],["80","81"],"/Users/ngw/Documents/Sites/Pianopet/client/src/components/Modal.js",[],"/Users/ngw/Documents/Sites/Pianopet/client/src/components/Student.js",["82"],"import React, { useState, useEffect, useContext } from 'react';\nimport { prettifyDate } from '../utils';\nimport Loading from './Loading';\nimport { Dashboard, Header, Sidebar, Nav } from './Dashboard'\n\nconst StudentContext = React.createContext();\nconst HomeworkContext = React.createContext();\n\nfunction Student(props) {\n    const [view, setView] = useState('home');\n    const [student, setStudent] = useState(null);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const fetchStudentData = () => {\n        fetch('/auth')\n            .then(response => response.json())\n            .then(body => {\n                if (!body) return console.log('no response from server');\n                if (!body.success) return console.log('no { success: true } response from server');\n                setStudent(body.student);\n                setIsLoaded(true);\n            });\n    }\n    useEffect(() => {\n        fetchStudentData();\n    }, []);\n    if (!isLoaded) return (\n        <Dashboard>\n            <Loading />\n        </Dashboard>\n    )\n    return (\n        <StudentContext.Provider value={fetchStudentData}>\n            <Dashboard teacher={false}>\n                <Header>\n                    {student.firstName}\n                </Header>\n                <Sidebar>\n                    <div className=\"StudentSidebar\">\n                        <div className=\"avatarContainer\">\n                            <img alt=\"student avatar\" className=\"studentAvatar\" src=\"https://lh3.googleusercontent.com/ImpxcbOUkhCIrWcHgHIDHmmvuFznNSGn2y1mor_hLqpYjI6Q1J7XAVvpR-I24ZOJL3s\" />\n                        </div>\n                        <div className=\"studentCoins\">\n                            <div className=\"coinsIcon\"><img alt=\"coin icon\" src=\"assets/Coin_ico.png\" /></div>\n                            <span className=\"coinsCount\">{student.coins.toString()}</span>\n                        </div>\n                    </div>\n                </Sidebar>\n                <Main view={view} student={student} />\n                <Nav>\n                    <button className=\"stealth link\" onClick={() => setView('home')}>Homework</button>\n                    <button className=\"stealth link\" onClick={() => setView('marketplace')}>Marketplace</button>\n                    <button className=\"stealth link\" onClick={() => setView('badges')}>Badges</button>\n                    <button className=\"stealth link\" onClick={props.logout}>Log out</button>\n                </Nav>\n            </Dashboard>\n        </StudentContext.Provider>\n    )\n}\n\nfunction Main(props) {\n    const { view, student } = props;\n    switch (view) {\n        case 'home': return <Home student={student} />;\n        default: return <Home student={student} />;\n    }\n}\n\nfunction Home(props) {\n    return (\n        <div className=\"Main\">\n            <ViewHomework student={props.student} />\n        </div>\n    )\n}\n\nfunction ViewHomework(props) {\n    const { student } = props;\n    const [homework, updateHomework] = useState(null);\n    const fetchHomework = () => {\n        fetch('/get/homework', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ studentId: student._id })\n        }).then(response => response.json())\n            .then(body => {\n                if (!body) return console.log('no response from server');\n                if (!body.success) return console.log('no { success: true } response from server');\n                updateHomework(body.homework);\n            });\n    }\n    useEffect(fetchHomework, []);\n    const viewHomework = () => {\n        const homeworkModules = [];\n        for (let i = 0; i < homework.length; i++) {\n            homeworkModules.push(<Homework {...homework[i]} />);\n        }\n        return homeworkModules;\n    }\n    return (\n        <HomeworkContext.Provider value={fetchHomework}>\n            <div className=\"ViewHomework\">\n                {homework ? viewHomework() : '...'}\n            </div>\n        </HomeworkContext.Provider>\n    )\n}\n\nfunction Homework(props) {\n    const { _id, date, headline, assignments } = props;\n    const homeworkAssignments = () => {\n        const assignmentsArray = [];\n        for (let i = 0; i < assignments.length; i++) {\n            assignmentsArray.push(<Assignment homeworkId={_id} index={i} {...assignments[i]} />);\n        }\n        return assignmentsArray;\n    }\n    return (\n        <div className=\"Homework\">\n            <div className=\"Header\">\n                <div>\n                    <span className=\"date\">{prettifyDate(date)}</span>\n                    <h3>{headline}</h3>\n                </div>\n            </div>\n            <div className=\"Body\">\n                <ul>\n                    <li className=\"smol\">\n                        <div className=\"label\">Assignments</div>\n                        <div className=\"progress\">Progress</div>\n                    </li>\n                </ul>\n                <ol>\n                    {homeworkAssignments()}\n                </ol>\n            </div>\n        </div>\n    )\n}\n\nfunction Assignment(props) {\n    const { homeworkId } = props;\n    const fetchHomework = useContext(HomeworkContext);\n    const updateHomeworkProgress = (value) => {\n        fetch('/update/progress', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ _id: homeworkId, index: props.index, value })\n        }).then(response => response.json())\n            .then(body => {\n                if (!body) return console.log('no response from server');\n                if (!body.success) return console.log('no { success: true } response from server');\n                fetchHomework();\n                // refresh hw data\n            });\n    }\n    return (\n        <li>\n            <div className=\"label\">{props.label}</div>\n            <div className=\"progress\">\n                <button onClick={props.progress === 0 ? () => {} : () => updateHomeworkProgress(props.progress - 1)}\n                    className={`stealth${props.progress === 0 ? ' disabled' : ''}`}\n                    style={{ visibility: props.recorded ? 'hidden' : 'visible' }}><i className=\"fas fa-minus-circle\"></i></button>\n                <ProgressBar percentage={(100 * props.progress) / 4} />\n                <button onClick={props.progress === 4 ? () => {} : () => updateHomeworkProgress(props.progress + 1)}\n                    className={`stealth${props.progress === 4 ? ' disabled' : ''}`}\n                    style={{ visibility: props.recorded ? 'hidden' : 'visible' }}><i className=\"fas fa-plus-circle\"></i></button>\n                {/*(props.progress > 0) &&\n                    <div className={`coinsEarned${props.recorded ? ' coinsAdded' : ''}`}>\n                        <img className=\"coinIcon\" alt=\"coin icon\" src=\"assets/Coin_ico.png\" />\n                        <span>{`${props.progress * 20}`}</span>\n                    </div>*/}\n            </div>\n        </li>\n    )\n}\n\nfunction ProgressBar(props) {\n    return (\n        <div className=\"ProgressBar\">\n            <div className=\"bar\" style={{ width: props.percentage+'%' }}></div>\n        </div>\n    )\n}\n\nexport default Student;","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Teacher.js",["83","84","85"],"import { useState, useEffect, useRef } from 'react';\nimport { Dashboard, Header, Sidebar } from './Dashboard';\nimport ViewStudent from './ViewStudent';\nimport Loading from './Loading';\nimport Modal from './Modal';\nimport ContextMenu from './ContextMenu';\nimport { getArrayIndexByKeyValue, shrinkit } from '../utils';\nimport Dropdown from './Dropdown';\n\nexport default function Teacher(props) {\n    const { teacher } = props;\n    const [view, setView] = useState({ type: 'home' });\n    const [students, setStudents] = useState([]);\n    const [wearables, setWearables] = useState([]);\n    const [badges, setBadges] = useState([]);\n    const [modal, setModal] = useState(false);\n    const [contextMenu, setContextMenu] = useState(false);\n    const getTeacherData = async () => {\n        const response = await fetch('/teacher/data', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ _id: teacher._id })\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no success response from server');\n        setStudents(body.students);\n        setWearables(body.wearables);\n        setBadges(body.badges);\n        if (view.type === 'student') {\n            const refreshCurrentStudent = (prevView) => {\n                let thisStudent = prevView.data;\n                let index = getArrayIndexByKeyValue('_id', thisStudent._id, body.students);\n                return body.students[index];\n            }\n            setView(prevView => ({\n                type: 'student',\n                data: refreshCurrentStudent(prevView)\n            }));\n        }\n    }\n    useEffect(() => {\n        getTeacherData();\n    }, [teacher._id]);\n    const generateStudentList = () => {\n        if (!students.length) return 'No students yet!';\n        const makeSureNameFits = (string) => {\n            if (string.length < 18) return string;\n            let shortenedString = string.substring(0, 17);\n            return shortenedString + '...';\n        }\n        const studentList = students.map(student => ({\n            value: student._id,\n            display: makeSureNameFits(student.firstName + ' ' + student.lastName)\n        }));\n        return (\n            <Dropdown\n                minWidth=\"12rem\"\n                defaultValue={{ value: students[0]._id, display: makeSureNameFits(students[0].firstName + ' ' + students[0].lastName) }}\n                listItems={studentList}\n                onChange={(_id) => setView({ type: 'student', data: students[students.findIndex(student => student._id === _id)] })}\n            />\n        )\n    }\n    const updateContextMenu = (e, content) => {\n        const position = {\n            top: `${e.clientY}px`,\n            right: `${window.innerWidth - e.clientX}px`\n        }\n        setContextMenu({\n            position,\n            content\n        });\n    }\n    const state = {\n        view,\n        students,\n        wearables,\n        badges,\n        modal,\n        updateView: setView,\n        updateModal: setModal,\n        updateContextMenu,\n        refreshData: getTeacherData\n    }\n    return (\n        <Dashboard teacher={true}>\n            {modal && <Modal exit={() => setModal(false)} children={modal} />}\n            {contextMenu && <ContextMenu {...contextMenu} updateContextMenu={setContextMenu} />}\n            <TeacherProfileDropdown {...props} {...state} />\n            <Sidebar>\n                <h2>Students</h2>\n                {generateStudentList()}\n                <hr />\n                <h2>Control Panel</h2>\n                <ul className=\"stealth\">\n                    <li><button onClick={() => setView({ type: 'marketplace' })} className=\"stealth link\">Marketplace</button></li>\n                    <li><button onClick={() => setView({ type: 'badges' })} className=\"stealth link\">Badges</button></li>\n                </ul>\n                <hr />\n                <div className=\"teacherCode\">\n                    Teacher code:<br />\n                    <b style={{ fontSize: '0.8rem' }}>{teacher._id}</b>\n                </div>\n            </Sidebar>\n            <Main {...props} {...state} />\n        </Dashboard>\n    );\n}\n\nfunction TeacherProfileDropdown(props) {\n    const { teacher } = props;\n    const [expanded, setExpanded] = useState(false);\n    const toggleExpanded = () => setExpanded(prevState => !prevState);\n    return (\n        <Header className={expanded ? 'expanded' : ''}>\n            <button onClick={toggleExpanded}>\n                <span className=\"name\">{teacher.username}</span>\n                <span className=\"caret\"></span>\n            </button>\n            <div className=\"pfp\" onClick={toggleExpanded}>\n                <img alt=\"pfp\" src={teacher.profilePic ? teacher.profilePic : 'assets/defaultpfp.jpg' } />\n            </div>\n            <ContextMenu\n              position={null}\n              ignoreClick={['.User .pfp', '.User > button']}\n              updateContextMenu={() => setExpanded(false)}\n              content={(\n                <ul>\n                    <li><button className=\"myAccount\" onClick={() => props.updateView({ type: 'account' })}>My Account</button></li>\n                    <li><button className=\"settings\" onClick={() => props.updateView({ type: 'settings' })}>Settings</button></li>\n                    <li><button className=\"logout\" onClick={props.logout}>Logout</button></li>\n                </ul>\n            )} />\n        </Header>\n    )\n}\n\nfunction Main(props) {\n    const { view } = props;\n    switch (view.type) {\n        case 'home': return <Home {...props} />;\n        case 'student': return <ViewStudent {...props} student={view.data} />;\n        case 'marketplace': return <TeacherMarketplace {...props} />;\n        case 'badges': return <TeacherBadges {...props} />;\n        case 'account': return <MyAccount {...props} />;\n        case 'settings': return <Settings {...props} />;\n        default: return <Home {...props} />;\n    }\n}\n\nfunction Home() {\n    return (\n        <div className=\"Main padme\">\n            <h1>Dashboard</h1>\n            <ul>\n                <li>View student dashboard</li>\n                <ul>\n                    <li>Add homework</li>\n                    <li>Log assignment progress</li>\n                    <li>Give coins</li>\n                    <li>Award badges</li>\n                </ul>\n                <li>General - apply to all students</li>\n                <ul>\n                    <li>Add/edit/delete badges</li>\n                    <li>Add/edit/delete closet items</li>\n                </ul>\n            </ul>\n        </div>\n    );\n}\n\nfunction TeacherMarketplace(props) {\n    const { teacher, modal } = props;\n    const [wearableModal, setWearableModal] = useState(false);\n    useEffect(() => {\n        if (!modal) setWearableModal(false);\n    }, [modal]);\n    useEffect(() => {\n        if (wearableModal) addNewWearable();\n    }, [teacher]);\n    const addNewWearable = () => {\n        props.updateModal(<AddOrEditWearable {...props} />);\n        setWearableModal(true);\n    }\n    return (\n        <div className=\"Main\">\n            <h1>Marketplace</h1>\n            <Marketplace {...props} />\n            <button onClick={addNewWearable}>Add new wearable</button>\n        </div>\n    )\n}\n\nfunction Marketplace(props) {\n    const { teacher, wearables } = props;\n    const [preview, setPreview] = useState({});\n    const [category, setCategory] = useState(() => teacher.wearableCategories[0]);\n    const wearableRefs = useRef({});\n    const editOrDeleteWearable = (e, _id) => {\n        e.preventDefault();\n        const index = wearables.findIndex(wearable => wearable._id === _id);\n        const thisWearable = wearables[index];\n        const editWearable = () => props.updateModal(<AddOrEditWearable {...props} wearable={thisWearable} />);\n        const deleteWearable = () => {\n            const handleDelete = async (e) => {\n                e.preventDefault();\n                props.updateModal(content({ loadingIcon: true }));\n                const response = await fetch('/delete/wearable', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ _id })\n                });\n                const body = await response.json();\n                if (!body) return console.log('no response from server');\n                if (!body.success) return console.log('no success response from server');\n                shrinkit(wearableRefs.current[_id], true);\n                props.refreshTeacher();\n                props.refreshData();\n                props.updateModal(false);\n            }\n            let content = (options = {\n                loadingIcon: false\n            }) => (\n                <div className=\"modalBox\">\n                    <h2>Are you sure?</h2>\n                    <img alt={thisWearable.name} src={thisWearable.src} style={{ float: 'right' }} />\n                    Are you sure you want to delete the wearable \"{thisWearable.name}\"? This action cannot be undone.\n                    <div className=\"buttons\">\n                        {options.loadingIcon\n                            ?   <Loading />\n                            :   <form onSubmit={handleDelete}>\n                                    <button type=\"submit\">Yes, I'm sure</button>\n                                    <button type=\"button\" className=\"greyed\" onClick={() => props.updateModal(false)}>Cancel</button>\n                                </form>\n                            }\n                    </div>\n                </div>\n            )\n            props.updateModal(content());\n        }\n        let content = (\n            <ul className=\"editDelete\">\n                <li><button onClick={editWearable}>Edit</button></li>\n                <li><button onClick={deleteWearable}>Delete</button></li>\n            </ul>\n        );\n        props.updateContextMenu(e, content);\n    }\n    const updatePreview = ({ category, name, src, value }) => {\n        if (preview[category] && preview[category].name === name) {\n            const previewObjectMinusCategory = (prevState) => {\n                const object = {...prevState};\n                delete object[category];\n                return object;\n            }\n            setPreview(prevState => ({\n                ...previewObjectMinusCategory(prevState)\n            }));\n            return;\n        }\n        setPreview(prevState => ({\n            ...prevState,\n            [category]: { name, src, value }\n        }));\n    }\n    const addOrEditCategory = (e, originalName) => {\n        e.preventDefault();\n        const editingCategory = teacher.wearableCategories.includes(originalName);\n        const handleAddOrEditCategory = async (e, categoryName) => {\n            e.preventDefault();\n            props.updateModal(content({ loadingIcon: true }));\n            const fromDropdown = !!categoryName;\n            const ROUTE = editingCategory ? '/edit/wearableCategory' : '/add/wearableCategory';\n            const formData = editingCategory\n                ?   {\n                        _id: teacher._id,\n                        originalName,\n                        updatedName: e.target[0].value\n                    }\n                :   {\n                        _id: teacher._id,\n                        categoryName: fromDropdown ? categoryName : e.target[0].value\n                    }\n            const response = await fetch(ROUTE, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(formData)\n            });\n            const body = await response.json();\n            if (!body) return console.log('no response from server');\n            if (!body.success) return console.log('no success response from server');\n            props.refreshTeacher();\n            if (editingCategory) {\n                props.refreshData(); // in case any wearables were affected by category name change\n                if (category === originalName) setCategory(e.target[0].value);\n            }\n            props.updateModal(false);\n        }\n        let content = (options = {\n            loadingIcon: false\n        }) => (\n            <div className=\"modalBox\">\n                <h2>{editingCategory ? 'Edit' : 'Add new'} category</h2>\n                <form onSubmit={handleAddOrEditCategory} autoComplete=\"off\">\n                    <label htmlFor=\"categoryName\">Category name:</label>\n                    <input type=\"text\" name=\"categoryName\" defaultValue={editingCategory ? originalName : ''} />\n                    <div className=\"buttons\">\n                        {options.loadingIcon\n                            ? <Loading />\n                            : <input type=\"submit\" />\n                        }\n                    </div>\n                </form>\n            </div>\n        );\n        props.updateModal(content);\n    }\n    const editCategory = (e, categoryName) => {\n        e.preventDefault();\n        let content = (\n            <ul className=\"editDelete\">\n                <li><button onClick={(e) => addOrEditCategory(e, categoryName)}>Edit</button></li>\n            </ul>\n        );\n        props.updateContextMenu(e, content);\n    }\n    const generatePreview = (preview) => {\n        const images = [];\n        for (let category in preview) {\n            images.push(<img key={`marketplacePreview-${category}`} src={preview[category].src} className={category} />);\n        }\n        return <div className=\"previewBox\">{images}</div>;\n    }\n    const generatePreviewDescription = (preview) => {\n        const previewItems = [];\n        for (let category in preview) {\n            previewItems.push(\n                <li key={`marketplacePreviewDescription-${category}`}>\n                    <span className=\"wearableName\">{preview[category].name}</span>\n                    <button>\n                        <img className=\"coin\" alt=\"coin icon\" src=\"assets/Coin_ico.png\" />\n                        <span className=\"wearableValue\">{preview[category].value}</span>\n                    </button>\n                </li>\n            )\n        }\n        return (\n            <ul className=\"previewDescription\">\n                <h3>Shopping Cart</h3>\n                {previewItems}\n            </ul>\n        );\n    }\n    const generateCategories = (categories) => {\n        const array = categories.map(category => (\n            <button\n              key={`wearableCategories-toolbar-${category}`}\n              className=\"stealth\"\n              onClick={() => setCategory(category)}\n              onContextMenu={(e) => editCategory(e, category)}>\n                {category}\n            </button>\n        ))\n        array.push(<button key=\"wearableCategories-toolbar-addNew\" className=\"add\" onClick={addOrEditCategory}></button>)\n        return array;\n    }\n    const generateWearables = (category) => {\n        const filteredList = wearables.filter(wearable => wearable.category === category);\n        return filteredList.map(wearable => (\n            <button\n              ref={(el) => wearableRefs.current[wearable._id] = el}\n              key={`${category}-wearable-${wearable.name}`}\n              className=\"stealth wearableItem\"\n              onClick={() => updatePreview(wearable)}\n              onContextMenu={(e) => editOrDeleteWearable(e, wearable._id)}>\n                <img\n                    alt={wearable.name}\n                    src={wearable.src}\n                />\n                <span className=\"wearableName\">{wearable.name}</span>\n                <img className=\"coin\" alt=\"coin icon\" src=\"assets/Coin_ico.png\" />\n                <span className=\"wearableValue\">{wearable.value}</span>\n            </button>\n        ));\n    }\n    return (\n        <div className=\"Marketplace\">\n            <div className=\"marketplacePreview\">\n                {generatePreview(preview)}\n                {generatePreviewDescription(preview)}\n            </div>\n            <div className=\"marketplaceCategories\">\n                {generateCategories(teacher.wearableCategories)}\n            </div>\n            <div className=\"marketplaceWearables\">\n                <div className=\"wearablesGrid\">\n                    {generateWearables(category)}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction AddOrEditWearable(props) {\n    const { teacher, wearable } = props;\n    const [loadingIcon, setLoadingIcon] = useState(false);\n    const [formData, setFormData] = useState({\n        _id: wearable ? wearable._id : '',\n        teacherCode: wearable ? wearable.teacherCode : teacher._id,\n        name: wearable ? wearable.name : '',\n        category: wearable ? wearable.category : teacher.wearableCategories[0],\n        src: wearable ? wearable.src : '',\n        value: wearable ? wearable.value : ''\n    });\n    const updateFormData = (key, value) => {\n        setFormData(prevState => ({\n            ...prevState,\n            [key]: value\n        }));\n    }\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoadingIcon(true);\n        const ROUTE = wearable ? '/edit/wearable' : '/add/wearable';\n        const response = await fetch(ROUTE, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no success response from server');\n        props.updateModal(false);\n        props.refreshData();\n    }\n    const addCategory = async (categoryName) => {\n        const response = await fetch('/add/wearableCategory', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                _id: teacher._id,\n                categoryName\n            })\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no success response from server');\n        props.refreshTeacher();\n    }\n    const dropdownListItems = () => {\n        const listItems = teacher.wearableCategories.map(item => ({\n            value: item,\n            display: item\n        }));\n        console.table(listItems);\n        return listItems;\n    }\n    return (\n        <div className=\"modalBox\">\n            <form className=\"pad\" onSubmit={handleSubmit}>\n                <h2>Add new wearable</h2>\n                <label htmlFor=\"name\">Wearable name:</label>\n                <input type=\"text\" defaultValue={wearable ? wearable.name : ''} onChange={(e) => updateFormData('name', e.target.value)} />\n                <label htmlFor=\"value\">Category:</label>\n                <Dropdown\n                    minWidth=\"10rem\"\n                    defaultValue={{ value: formData.category, display: formData.category }}\n                    listItems={dropdownListItems()}\n                    addNew={addCategory}\n                    onChange={(value) => updateFormData('category', value)} />\n                <label htmlFor=\"src\">Image link:</label>\n                <input type=\"text\" defaultValue={wearable ? wearable.src : ''} onChange={(e) => updateFormData('src', e.target.value)} />\n                <label htmlFor=\"value\">Wearable value:</label>\n                <input type=\"text\" defaultValue={wearable ? wearable.value : ''} onChange={(e) => updateFormData('value', e.target.value)} />\n                <div className=\"buttons\">\n                    {loadingIcon\n                        ? <Loading />\n                        : <input type=\"submit\" />\n                    }\n                </div>\n            </form>\n        </div>\n    )\n}\n\nfunction TeacherBadges(props) {\n    const addNewBadge = () => {\n        props.updateModal(<AddOrEditBadge {...props} />)\n    }\n    return (\n        <div className=\"Main\">\n            <h1>Badges</h1>\n            <Badges {...props} />\n            <button onClick={addNewBadge}>Add new badge</button>\n        </div>\n    )\n}\n\nfunction Badges(props) {\n    const { badges } = props;\n    const badgesRef = useRef({});\n    const editOrDeleteBadge = (e, _id) => {\n        e.preventDefault();\n        const index = badges.findIndex(badge => badge._id === _id);\n        const thisBadge = badges[index];\n        const editBadge = () => props.updateModal(<AddOrEditBadge {...props} badge={badges[index]} />);\n        const deleteBadge = () => {\n            const handleDelete = async () => {\n                props.updateModal(content({ loadingIcon: true }));\n                const response = await fetch('/delete/badge', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ _id })\n                });\n                const body = await response.json();\n                if (!body) return console.log('no response from server');\n                if (!body.success) return console.log('no success response from server');\n                shrinkit(badgesRef.current[_id], true);\n                props.refreshTeacher();\n                props.refreshData();\n                props.updateModal(false);\n            }\n            let content = (options = {\n                loadingIcon: false\n            }) => (\n                <div className=\"modalBox\">\n                    <h2>Are you sure?</h2>\n                    <img alt={thisBadge.name} src={thisBadge.src} style={{ float: 'right' }} />\n                    Are you sure you want to delete the badge \"{thisBadge.name}\"? This action cannot be undone.\n                    <div className=\"buttons\">\n                        {options.loadingIcon\n                            ?   <Loading />\n                            :   <form onSubmit={handleDelete}>\n                                    <button type=\"submit\">Yes, I'm sure</button>\n                                    <button type=\"button\" className=\"greyed\" onClick={() => props.updateModal(false)}>Cancel</button>\n                                </form>\n                            }\n                    </div>\n                </div>\n            )\n            props.updateModal(content());\n        }\n        let content = (\n            <ul className=\"editDelete\">\n                <li><button onClick={editBadge}>Edit</button></li>\n                <li><button onClick={deleteBadge}>Delete</button></li>\n            </ul>\n        );\n        props.updateContextMenu(e, content);\n    }\n    const generateBadgeList = () => {\n        return badges.map(badge => (\n            <div\n              key={`badgeList-${badge._id}`}\n              ref={(el) => badgesRef.current[badge._id] = el}\n              className=\"badgeItem\">\n                <img alt={badge.name} src={badge.src} onContextMenu={(e) => editOrDeleteBadge(e, badge._id)} />\n                <span className=\"badgeName\">{badge.name}</span>\n                <span className=\"badgeValue\">{badge.value}</span>\n            </div>\n        ));\n    }\n    return (\n        <div className=\"BadgeList\">\n            {generateBadgeList()}\n        </div>\n    )\n}\n\nfunction AddOrEditBadge(props) {\n    const { teacher, badge } = props;\n    const [loadingIcon, setLoadingIcon] = useState(false);\n    const [formData, setFormData] = useState({\n        _id: badge ? badge._id : '',\n        teacherCode: badge ? badge.teacherCode : teacher._id,\n        name: badge ? badge.name : '',\n        src: badge ? badge.src : '',\n        value: badge ? badge.value : ''\n    });\n    const updateFormData = (key, value) => {\n        setFormData(prevState => ({\n            ...prevState,\n            [key]: value\n        }));\n    }\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoadingIcon(true);\n        const ROUTE = badge ? '/edit/badge' : '/add/badge';\n        const response = await fetch(ROUTE, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no success response from server');\n        props.updateModal(false);\n        props.refreshData();\n    }\n    return (\n        <div className=\"modalBox\">\n            <form className=\"pad\" onSubmit={handleSubmit}>\n                <h2>{badge ? 'Edit this' : 'Add new'} badge</h2>\n                <label htmlFor=\"name\">Badge name:</label>\n                <input type=\"text\" defaultValue={badge ? badge.name : ''} onChange={(e) => updateFormData('name', e.target.value)} />\n                <label htmlFor=\"src\">Image link:</label>\n                <input type=\"text\" defaultValue={badge ? badge.src : ''} onChange={(e) => updateFormData('src', e.target.value)} />\n                <label htmlFor=\"value\">Badge value:</label>\n                <input type=\"text\" defaultValue={badge ? badge.value : ''} onChange={(e) => updateFormData('value', e.target.value)} />\n                <div className=\"buttons\">\n                    {loadingIcon\n                        ? <Loading />\n                        : <input type=\"submit\" />\n                    }\n                </div>\n            </form>\n        </div>\n    )\n}\n\nfunction MyAccount(props) {\n    return (\n        <div className=\"Main\">\n            <h1>My Account</h1>\n        </div>\n    );\n}\n\nfunction Settings(props) {\n    return (\n        <div className=\"Main\">\n            <h1>Settings</h1>\n        </div>\n    );\n}","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Marketplace.js",["86"],"import { useState } from 'react';\n\nexport default function Marketplace(props) {\n    const { wearables } = props;\n    const [preview, setPreview] = useState({});\n    const [category, setCategory] = useState('head');\n    const updatePreview = ({ category, src, name }) => {\n        if (preview[category]) {\n            const previewObjectMinusCategory = (prevState) => {\n                const object = {...prevState};\n                delete object[category];\n                return object;\n            }\n            setPreview(prevState => ({\n                ...previewObjectMinusCategory(prevState)\n            }));\n            return;\n        }\n        setPreview(prevState => ({\n            ...prevState,\n            [category]: { src, name }\n        }));\n    }\n    const generatePreview = (preview) => {\n        const images = [];\n        for (let wearable in preview) {\n            images.push(<img src={preview[wearable].src} className={preview[wearable].category} />);\n        }\n        return images;\n    }\n    const generateWearables = (category) => {\n        const filteredList = wearables.filter(wearable => wearable.category === category);\n        const array = [];\n        for (let i = 0; i < filteredList.length; i++) {\n            array.push(\n                <div className=\"wearableItem\" key={`${category}-wearable-${filteredList[i].name}`}>\n                    <button className=\"stealth\">\n                        <img\n                            alt={filteredList[i].name}\n                            src={filteredList[i].src}\n                            onClick={() => updatePreview(filteredList[i])} />\n                    </button>\n                </div>\n            );\n        }\n        return array;\n    }\n    return (\n        <div className=\"Marketplace\">\n            <div id=\"demo\" onClick={() => console.table(preview)}></div>\n            <div className=\"marketplacePreview\">\n                {generatePreview(preview)}\n            </div>\n            <div className=\"marketplaceCategories\">\n                <button className=\"stealth\" onClick={() => setCategory('head')}>Head</button>\n                <button className=\"stealth\" onClick={() => setCategory('face')}>Face</button>\n                <button className=\"stealth\" onClick={() => setCategory('body')}>Body</button>\n            </div>\n            <div className=\"marketplaceWearables\">\n                {generateWearables(category)}\n            </div>\n        </div>\n    )\n}",["87","88"],"/Users/ngw/Documents/Sites/Pianopet/client/src/components/ViewStudent.js",["89"],"import { useState, useEffect, useRef } from 'react';\nimport Loading from './Loading';\nimport { prettifyDate } from '../utils';\nimport dayjs from 'dayjs';\nimport MiniMenu from './MiniMenu';\n\nexport default function ViewStudent(props) {\n    const { student } = props;\n    const [homework, setHomework] = useState([]);\n    const [isLoaded, setIsLoaded] = useState(false);\n    const state = { homework }\n    const getHomework = async () => {\n        const response = await fetch('/get/homework', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ studentId: student._id })\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no { success: true } response from server');\n        setHomework(body.homework);\n        setIsLoaded(true);\n    }\n    useEffect(() => {\n        setIsLoaded(false);\n        getHomework();\n    }, [student._id]);\n    const addNewHomework = () => {\n        let content = (\n            <div className=\"modalBox\">\n                <h2>{`Add homework for ${student.firstName}`}</h2>\n                <AddHomeworkForm {...props} {...state} refreshHomework={getHomework} />\n            </div>\n        )\n        props.updateModal(content);\n    }\n    if (!student) return;\n    if (!isLoaded) return <Loading />;\n    return (\n        <div className=\"Main\">\n            <div className=\"ViewStudent\">\n                <div className=\"viewStudentHeader\">\n                    <h1>{student.firstName}'s Homework Progress</h1>\n                    <button className=\"stealth\" onClick={addNewHomework}><i className=\"fas fa-plus-circle\"></i></button>\n                </div>\n                <div className=\"viewStudentSidebar\">\n                    <div className=\"avatarContainer\">\n                        <img alt=\"student avatar\" className=\"studentAvatar\" src=\"https://lh3.googleusercontent.com/ImpxcbOUkhCIrWcHgHIDHmmvuFznNSGn2y1mor_hLqpYjI6Q1J7XAVvpR-I24ZOJL3s\" />\n                    </div>\n                    <StudentCoins {...props} />\n                </div>\n                <div className=\"viewStudentHomework\">\n                    <ViewHomework {...props} {...state} refreshHomework={getHomework} />\n                </div>\n            </div>\n        </div>\n    )\n}\n\nfunction StudentCoins(props) {\n    const { student } = props;\n    const [coinsCount, updateCoinsCount] = useState(student.coins);\n    const [makingChanges, updateMakingChanges] = useState(false);\n    useEffect(() => {\n        updateMakingChanges(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [student._id]);\n    useEffect(() => {\n        updateCoinsCount(student.coins);\n    }, [student.coins]);\n    const handleUpdateCoins = async () => {\n        const response = await fetch('/update/coins', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                studentId: student._id,\n                coins: coinsCount\n            })\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no success=true message from server');\n        updateMakingChanges(false);\n        props.refreshData();\n    }\n    const editCoinsButtons = () => {\n        return (\n            <div>\n                <button className=\"stealth link\" onClick={() => addCoins(-10)}><i className=\"fas fa-minus-circle\"></i></button>\n                <button className=\"stealth link\" onClick={() => addCoins(10)}><i className=\"fas fa-plus-circle\"></i></button>\n            </div>\n        )\n    }\n    const addCoins = (amount) => {\n        updateCoinsCount(coinsCount + amount);\n    }\n    return (\n        <div className=\"StudentCoins\">\n            <div className=\"coinsIcon\"><img alt=\"coin icon\" src=\"assets/Coin_ico.png\" /></div>\n            <span className=\"coinsCount\">{coinsCount.toString()}</span>\n            <div className=\"editCoinsButton\">\n                {makingChanges ? editCoinsButtons() : <button className=\"stealth link\" onClick={() => updateMakingChanges(true)}>Edit</button>}\n            </div>\n            {makingChanges && <div className=\"confirmChangesButton\">\n                <button className=\"secondary\" onClick={() => handleUpdateCoins(student._id)}>Save</button>\n                <button className=\"secondary greyed\" onClick={() => {\n                    updateMakingChanges(false);\n                    updateCoinsCount(student.coins);\n                }}>Cancel</button>\n            </div>}\n        </div>\n    )\n}\n\nfunction ViewHomework(props) {\n    const { homework } = props;\n    const viewHomework = () => {\n        if (!homework.length) return 'No homework exists for this student';\n        const homeworkModules = [];\n        for (let i = 0; i < homework.length; i++) {\n            homeworkModules.push(<Homework {...props} key={homework[i]._id} {...homework[i]} />)\n        }\n        return homeworkModules;\n    }\n    return (\n        <div className=\"ViewHomework\">\n            {viewHomework()}\n        </div>\n    )\n}\n\nfunction Homework(props) {\n    const { _id, date, headline, assignments } = props;\n    const [showingMenu, updateShowingMenu] = useState(false);\n    const toggleMenu = () => {\n        updateShowingMenu(prevState => !prevState);\n    }\n    const showMenu = () => {\n        return (\n            <MiniMenu exit={() => updateShowingMenu(false)}>\n                <button className=\"stealth link edit\" onClick={launchEditHomework}>Edit</button>\n                <button className=\"stealth link delete\" onClick={confirmDeletion}>Delete</button>\n            </MiniMenu>\n        );\n    }\n    const launchEditHomework = () => {\n        updateShowingMenu(false);\n        props.updateModal(<EditHomeworkForm {...props} />);\n    }\n    const confirmDeletion = () => {\n        updateShowingMenu(false);\n        let content = (options = {\n            loadingIcon: false\n        }) => (\n            <div className=\"modalBox\">\n                <h2>Are you sure you want to proceed?</h2>\n                This cannot be undone.\n                {options.loadingIcon\n                    ?   <Loading />\n                    :   <div className=\"buttons\">\n                            <button onClick={handleDeleteHomework}>Yes, I'm sure</button>\n                            <button className=\"greyed\" onClick={() => props.updateModal(false)}>Cancel</button>\n                        </div>\n                    }\n            </div>\n        );\n        props.updateModal(content);\n    }\n    const handleDeleteHomework = async () => {\n        const response = await fetch('/delete/homework', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ _id })\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no { success: true } response from server');\n        props.updateModal(false);\n        props.refreshHomework();\n    }\n    const homeworkAssignments = () => {\n        const assignmentsList = [];\n        for (let i = 0; i < assignments.length; i++) {\n            assignmentsList.push(<Assignment {...props} homeworkId={_id} key={assignments[i]._id} index={i} {...assignments[i]} />);\n        }\n        return assignmentsList;\n    }\n    return (\n        <div className=\"Homework\">\n            <div className=\"Header\">\n                <div>\n                    <span className=\"date\">{prettifyDate(date)}</span>\n                    <h3>{headline}</h3>\n                </div>\n                <div className=\"options\">\n                    <button className=\"stealth\" onClick={toggleMenu}><i className=\"fas fa-bars\"></i></button>\n                    {showingMenu && showMenu()}\n                </div>\n            </div>\n            <div className=\"Body\">\n                <ul>\n                    <li className=\"smol\">\n                        <div className=\"label\">Assignments</div>\n                        <div className=\"progress\">Progress</div>\n                    </li>\n                </ul>\n                <ol>\n                    {homeworkAssignments()}\n                </ol>\n            </div>\n        </div>\n    )\n}\n\nfunction Assignment(props) {\n    const { student, homeworkId } = props;\n    const coinsNumber = useRef(null);\n    const addCoins = async (index, recorded = true) => {\n        if (props.recorded) return;\n        const response = await fetch('/update/recorded', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ _id: homeworkId, index, recorded })\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no { success: true } response from server');\n        const updateCoins = async () => {\n            let coinsCount = parseInt(coinsNumber.current.innerHTML);\n            coinsCount += student.coins;\n            const response = await fetch('/update/coins', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    studentId: student._id,\n                    coins: coinsCount\n                })\n            });\n            const body = await response.json();\n            if (!body) return console.log('no response from server');\n            if (!body.success) return console.log('no { success: true } message from server');\n            console.log('success!!!!!');\n            props.refreshData();\n            props.refreshHomework();\n        }\n        updateCoins();\n    }\n    const updateHomeworkProgress = async (index, value) => {\n        const response = await fetch('/update/progress', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ _id: homeworkId, index, value })\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no { success: true } response from server');\n        props.refreshHomework();\n    }\n    return (\n        <li>\n            <div className=\"label\">{props.label}</div>\n            <div className=\"progress\">\n                <input type=\"range\"\n                    min=\"0\" max=\"4\"\n                    defaultValue={props.progress.toString()}\n                    onChange={(e) => updateHomeworkProgress(props.index, e.target.value)}\n                    disabled={props.recorded ? true : false} />\n                {(props.progress > 0) &&\n                    <div className={`coinsEarned${props.recorded ? ' coinsAdded' : ''}`} onClick={() => addCoins(props.index)}>\n                        <img className=\"coinIcon\" alt=\"coin icon\" src=\"assets/Coin_ico.png\" />\n                        <span ref={coinsNumber}>{`${props.progress * 20}`}</span>\n                    </div>}\n            </div>\n        </li>\n    )\n}\n\nfunction AddHomeworkForm(props) {\n    const [formData, updateFormData] = useState({\n        studentId: props.student._id,\n        date: dayjs().format('YYYY-MM-DD'),\n        headline: '',\n        assignments: [{}, {}, {}, {}]\n    });\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const response = await fetch('/add/homework', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no { success: true } response from server');\n        props.updateModal(false);\n        props.refreshData();\n        props.refreshHomework();\n    }\n    const handleAddAssignment = (index, label) => {\n        let { assignments } = formData;\n        let item = assignments[index];\n        item = { label: label, progress: 0 }\n        assignments[index] = item;\n        updateFormData({ ...formData, assignments });\n    }\n    const today = () => {\n        return dayjs().format('YYYY-MM-DD');\n    }\n    return (\n        <form className=\"addHomeworkForm\" onSubmit={handleSubmit} autoComplete=\"off\">\n            <div className=\"addHomework\">\n                <div className=\"addHomeworkDate\">\n                    <label htmlFor=\"date\">Date:</label>\n                    <input type=\"date\" defaultValue={today()} onChange={(e) => updateFormData({ ...formData, date: e.target.value })} />\n                </div>\n                <div className=\"addHomeworkHeadline\">\n                    <label htmlFor=\"headline\">Headline:</label>\n                    <input type=\"text\" onChange={(e) => updateFormData({ ...formData, headline: e.target.value })} />\n                </div>\n                <div className=\"addHomeworkAssignments\">\n                    <label htmlFor=\"assignments\">Assignments:</label>\n                    <li><span className=\"numBubble\">1.</span><input type=\"text\" onChange={(e) => handleAddAssignment(0, e.target.value)} /></li>\n                    <li><span className=\"numBubble\">2.</span><input type=\"text\" onChange={(e) => handleAddAssignment(1, e.target.value)} /></li>\n                    <li><span className=\"numBubble\">3.</span><input type=\"text\" onChange={(e) => handleAddAssignment(2, e.target.value)} /></li>\n                    <li><span className=\"numBubble\">4.</span><input type=\"text\" onChange={(e) => handleAddAssignment(3, e.target.value)} /></li>\n                </div>\n            </div>\n            <input type=\"Submit\" />\n        </form>\n    )\n}\n\nfunction EditHomeworkForm(props) {\n    const { _id, date, headline, assignments } = props;\n    const [formData, updateFormData] = useState({ _id, date, headline, assignments });\n    const handleEditHomework = async (e) => {\n        e.preventDefault();\n        const response = await fetch('/edit/homework', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(formData)\n        });\n        const body = await response.json();\n        if (!body) return console.log('no response from server');\n        if (!body.success) return console.log('no { success: true } response from server');\n        props.updateModal(false);\n        props.refreshHomework();\n    }\n    const handleEditAssignment = (index, label) => {\n        let item = assignments[index];\n        item.label = label;\n        assignments[index] = item;\n        updateFormData({ ...formData, assignments });\n    }\n    console.log(date);\n    return (\n        <form className=\"addHomeworkForm\" onSubmit={handleEditHomework} autoComplete=\"off\">\n            <h2>Edit homework for {prettifyDate(date)}</h2>\n            <div className=\"addHomework\">\n                <div className=\"addHomeworkDate\">\n                    <label htmlFor=\"date\">Date:</label>\n                    <input type=\"date\" defaultValue={date.split('T')[0]} onChange={(e) => updateFormData({ ...formData, date: e.target.value })} />\n                </div>\n                <div className=\"addHomeworkHeadline\">\n                    <label htmlFor=\"headline\">Headline:</label>\n                    <input type=\"text\" defaultValue={headline} onChange={(e) => updateFormData({ ...formData, headline: e.target.value })} />\n                </div>\n                <div className=\"addHomeworkAssignments\">\n                    <label htmlFor=\"assignments\">Assignments:</label>\n                    <li><span className=\"numBubble\">1.</span><input type=\"text\" defaultValue={assignments[0].label} onChange={(e) => handleEditAssignment(0, e.target.value)} /></li>\n                    <li><span className=\"numBubble\">2.</span><input type=\"text\" defaultValue={assignments[1].label} onChange={(e) => handleEditAssignment(1, e.target.value)} /></li>\n                    <li><span className=\"numBubble\">3.</span><input type=\"text\" defaultValue={assignments[2].label} onChange={(e) => handleEditAssignment(2, e.target.value)} /></li>\n                    <li><span className=\"numBubble\">4.</span><input type=\"text\" defaultValue={assignments[3].label} onChange={(e) => handleEditAssignment(3, e.target.value)} /></li>\n                </div>\n            </div>\n            <input type=\"Submit\" />\n        </form>\n    )\n}","/Users/ngw/Documents/Sites/Pianopet/client/src/components/ContextMenu.js",["90"],"import { useEffect } from 'react';\nimport { elementHasParent } from '../utils';\n\nexport default function ContextMenu(props) {\n    useEffect(() => {\n        const closeContextMenu = (e) => {\n            if (props.ignoreClick) {\n                for (let selector of props.ignoreClick) {\n                    if (elementHasParent(e.target, selector)) return;\n                }\n            }\n            props.updateContextMenu(false);\n        }\n        window.addEventListener('click', closeContextMenu);\n        return () => window.removeEventListener('click', closeContextMenu);\n    }, []);\n    return (\n        <div className=\"ContextMenu\" style={props.position}>\n            {props.content}\n        </div>\n    );\n}","/Users/ngw/Documents/Sites/Pianopet/client/src/components/Dropdown.js",["91"],"import { useEffect, useRef, useState } from 'react';\nimport { elementHasParent } from '../utils';\n\nexport default function Dropdown(props) {\n    const { defaultValue, listItems } = props;\n    const [display, setDisplay] = useState(() => {\n        if (!listItems || !listItems.length) return 'Add new...';\n        if (!defaultValue) return 'Select one';\n        return defaultValue.display;\n    });\n    const [isOpen, setIsOpen] = useState(false);\n    const [addingNew, setAddingNew] = useState(false);\n    const dropdownList = useRef(null);\n    useEffect(() => {\n        const closeDropdown = (e) => {\n            if (elementHasParent(e.target, '.dropdownDisplay')) return;\n            if (elementHasParent(e.target, '.addNew')) return;\n            setIsOpen(false);\n        }\n        window.addEventListener('click', closeDropdown);\n        return () => window.removeEventListener('click', closeDropdown);\n    }, []);\n    useEffect(() => {\n        if (!dropdownList || !dropdownList.current) return;\n        if (isOpen) dropdownList.current.style.maxHeight = dropdownList.current.scrollHeight + 1 + 'px'; // plus 1px to account for 1px bottom border\n        else {\n            dropdownList.current.style.maxHeight = '0px';\n            setAddingNew(false); // unrelated to maxHeight adjustment thing\n        }\n    }, [isOpen]);\n    useEffect(() => {\n        if (addingNew) dropdownList.current.style.maxHeight = dropdownList.current.scrollHeight + 1 + 'px';\n    }, [addingNew]);\n    const toggleIsOpen = () => setIsOpen(prevState => !prevState);\n    const handleClick = (e) => {\n        setDisplay(e.target.innerHTML);\n        props.onChange(e.target.getAttribute('data-value'));\n    }\n    const generateList = () => {\n        const buttonForAddNew =\n            <AddNew {...props}\n                addingNew={addingNew}\n                updateAddingNew={setAddingNew}\n                updateIsOpen={setIsOpen}\n                updateDisplay={setDisplay}\n            />;\n        if ((!listItems || !listItems.length) && props.addNew) {\n            console.table(listItems);\n            return buttonForAddNew;\n        }\n        const array = [];\n        for (let item of listItems) {\n            array.push(\n                <li className=\"dropdownItem\" key={`dropdownItem-${item.value}`}>\n                    <button type=\"button\" data-value={item.value} onClick={handleClick}>{item.display}</button>\n                </li>\n            );\n        }\n        if (props.addNew) array.push(buttonForAddNew);\n        return array;\n    }\n    return (\n        <div className={`Dropdown${isOpen ? ' expanded' : ''}`} style={{ minWidth: props.minWidth }}>\n            <div className=\"dropdownDisplay\" onClick={toggleIsOpen}>{display}</div>\n            <ul className=\"dropdownList\" ref={dropdownList}>{generateList()}</ul>\n        </div>\n    );\n}\n\nfunction AddNew(props) {\n    const { addingNew } = props;\n    const [inputValue, setInputValue] = useState(null);\n    const inputRef = useRef(null);\n    useEffect(() => {\n        if (!addingNew) return setInputValue(null);\n        inputRef.current.focus();\n        const handleKeydown = (e) => {\n            if (e.key === 'Escape') return props.updateAddingNew(false);\n            if (e.key === 'Enter') {\n                e.preventDefault();\n                props.addNew(inputRef.current.value);\n                props.updateDisplay(inputRef.current.value);\n                props.onChange(inputRef.current.value);\n                props.updateIsOpen(false);\n                return;\n            }\n        }\n        window.addEventListener('keydown', handleKeydown);\n        return () => window.removeEventListener('keydown', handleKeydown);\n    }, [addingNew]);\n    return (\n        <li className=\"dropdownItem\" key=\"dropdownItem-addNew\">\n            {addingNew\n                ?   <button type=\"button\" className=\"addNew active\">\n                        <input\n                            ref={inputRef}\n                            type=\"text\"\n                            defaultValue={inputValue}\n                            onChange={(e) => setInputValue(e.target.value)}\n                        />\n                        <span className=\"inputHint\">Press Enter to submit, Esc to cancel.</span>\n                    </button>\n                :   <button type=\"button\" className=\"addNew\" onClick={() => props.updateAddingNew(true)}>\n                        {props.buttonContent || 'Add new...'}\n                    </button>\n                }\n        </li>\n    )\n}",{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","replacedBy":"95"},{"ruleId":"92","replacedBy":"96"},{"ruleId":"94","replacedBy":"97"},{"ruleId":"92","replacedBy":"98"},{"ruleId":"94","replacedBy":"99"},{"ruleId":"100","severity":1,"message":"101","line":93,"column":30,"nodeType":"102","endLine":93,"endColumn":32,"suggestions":"103"},{"ruleId":"100","severity":1,"message":"104","line":46,"column":8,"nodeType":"102","endLine":46,"endColumn":21,"suggestions":"105"},{"ruleId":"100","severity":1,"message":"106","line":184,"column":8,"nodeType":"102","endLine":184,"endColumn":17,"suggestions":"107"},{"ruleId":"108","severity":1,"message":"109","line":338,"column":25,"nodeType":"110","endLine":338,"endColumn":120},{"ruleId":"108","severity":1,"message":"109","line":27,"column":25,"nodeType":"110","endLine":27,"endColumn":99},{"ruleId":"92","replacedBy":"111"},{"ruleId":"94","replacedBy":"112"},{"ruleId":"100","severity":1,"message":"113","line":29,"column":8,"nodeType":"102","endLine":29,"endColumn":21,"suggestions":"114"},{"ruleId":"100","severity":1,"message":"115","line":16,"column":8,"nodeType":"102","endLine":16,"endColumn":10,"suggestions":"116"},{"ruleId":"100","severity":1,"message":"115","line":90,"column":8,"nodeType":"102","endLine":90,"endColumn":19,"suggestions":"117"},"no-native-reassign",["118"],"no-negated-in-lhs",["119"],["118"],["119"],["118"],["119"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'student._id'. Either include it or remove the dependency array.","ArrayExpression",["120"],"React Hook useEffect has a missing dependency: 'getTeacherData'. Either include it or remove the dependency array.",["121"],"React Hook useEffect has missing dependencies: 'addNewWearable' and 'wearableModal'. Either include them or remove the dependency array.",["122"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["118"],["119"],"React Hook useEffect has a missing dependency: 'getHomework'. Either include it or remove the dependency array.",["123"],"React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["124"],["125"],"no-global-assign","no-unsafe-negation",{"desc":"126","fix":"127"},{"desc":"128","fix":"129"},{"desc":"130","fix":"131"},{"desc":"132","fix":"133"},{"desc":"134","fix":"135"},{"desc":"136","fix":"137"},"Update the dependencies array to be: [student._id]",{"range":"138","text":"139"},"Update the dependencies array to be: [getTeacherData, teacher._id]",{"range":"140","text":"141"},"Update the dependencies array to be: [addNewWearable, teacher, wearableModal]",{"range":"142","text":"143"},"Update the dependencies array to be: [getHomework, student._id]",{"range":"144","text":"145"},"Update the dependencies array to be: [props]",{"range":"146","text":"147"},"Update the dependencies array to be: [addingNew, props]",{"range":"148","text":"149"},[3572,3574],"[student._id]",[1821,1834],"[getTeacherData, teacher._id]",[7006,7015],"[addNewWearable, teacher, wearableModal]",[1036,1049],"[getHomework, student._id]",[584,586],"[props]",[3678,3689],"[addingNew, props]"]